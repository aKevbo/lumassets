"use strict";SharkGame.Tabs={current:"home"},SharkGame.TabHandler={init(){SharkGame.Tabs.current="home",$(window).on("resize",_.debounce(this.validateTabWidth,300));new ResizeObserver(_.debounce((e=>{const a=e[0].target,t=$(a);t.css("position","static");const s=a.getBoundingClientRect();t.offset().top+s.height<$(window).height()&&t.css("top",t.offset().top)}),400,{maxWait:600})).observe(document.getElementById("content"))},keybindSwitchTab(e){SharkGame.Tabs[e].discovered&&(SharkGame.TabHandler.changeTab(e),$("#tooltipbox").hasClass("forIncomeTable")||home.onHomeUnhover())},checkTabUnlocks(){$.each(SharkGame.Tabs,((e,a)=>{if("current"===e||a.discovered)return;let t=!0;a.discoverReq.resource&&(t&&=res.checkResources(a.discoverReq.resource,!0));const s=SharkGame.Upgrades.getUpgradeTable();if(a.discoverReq.upgrade){let e=!1;_.each(a.discoverReq.upgrade,(a=>{s[a]&&(e=!0,t=t&&SharkGame.Upgrades.purchased.includes(a))})),e||(t=!1)}if(a.discoverReq.flag&&$.each(a.discoverReq.flag,((e,a)=>{if(SharkGame.flags[e])t=t&&SharkGame.flags[e]===a;else{if(!SharkGame.persistentFlags[e])return t=!1,!1;t=t&&SharkGame.persistentFlags[e]===a}})),t){switch(e){case"reflection":SharkGame.persistentFlags.seenReflection||log.addDiscovery("Discovered "+a.name+"!");break;case"cheats":SharkGame.persistentFlags.seenCheatsTab||log.addDiscovery("Discovered "+a.name+"!");break;default:log.addDiscovery("Discovered "+a.name+"!")}this.discoverTab(e)}}))},isTabUnlocked:e=>SharkGame.Tabs[e].discovered,validateTabWidth(){const e=SharkGame.Settings.current.logLocation;"left"!==e&&"top"!==e&&$("#tabList").css("margin-right",$(window).width()-document.getElementById("content").getBoundingClientRect().right+14+"px")},setUpTab(){const e=SharkGame.Tabs;$("#content").empty(),$("#contentMenu").empty(),$("#contentMenu").append(`<ul id="tabList" class="${SharkGame.Settings.current.minimizedTopbar?"":"notFixed"}"></ul></div><div id="tabBorder" class="clear-fix">`),this.validateTabWidth(),this.createTabNavigation();e[e.current].code.switchTo()},createTabMenu(){this.createTabNavigation()},registerTab(e){SharkGame.Tabs[e.tabId]={id:e.tabId,name:e.tabName,discovered:e.tabDiscovered,code:e,discoverReq:e.discoverReq||{}}},updateRegistration(e){SharkGame.Tabs[e.tabId].name=e.tabName,SharkGame.Tabs[e.tabId].discoverReq=e.discoverReq||{}},createTabNavigation(){const e=SharkGame.Tabs,a=$("#tabList");a.empty();let t=0;$.each(e,((e,a)=>{a.discovered&&t++})),t>1&&$.each(e,((e,t)=>{const s=SharkGame.Tabs.current===e;if(t.discovered){const r=$("<li>");s?r.html(t.name):(r.append($("<a>").attr("id","tab-"+e).attr("href","javascript:;").html(t.name).on("click",(function(){const e=$(this).attr("id").split("-")[1];SharkGame.TabHandler.changeTab(e)}))),t.seen||r.addClass("newTab")),a.append(r)}}))},changeTab(e){SharkGame.Tabs.current=e,SharkGame.Tabs[e].seen=!0,this.setUpTab()},discoverTab(e){SharkGame.Tabs[e].discovered=!0,("reflection"===e&&SharkGame.persistentFlags.seenReflection||"cheats"===e&&SharkGame.persistentFlags.seenCheatsTab)&&(SharkGame.Tabs[e].seen=!0),this.createTabMenu()}};