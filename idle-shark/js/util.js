"use strict";SharkGame.MathUtil={constantCost:(e,t,r)=>"object"==typeof e?r.times(t):t*r,constantMax:(e,t,r)=>"object"==typeof e?t.dividedBy(r).plus(e):(t=Math.floor(Math.floor(t)*(1-1e-9)+.1))/r+e,linearCost:(e,t,r)=>"object"==typeof e?r.dividedBy(2).times(t.times(t).plus(t).plus(e.times(2).times(t))):r/2*(t*t+t+2*t*e),linearMax:(e,t,r)=>"object"==typeof e?e.times(e).plus(e).plus(t.times(2).dividedBy(r)).plus(.25).squareRoot().minus(.5):(t=Math.floor(Math.floor(t)*(1-1e-9)),Math.sqrt(e*e+e+2*t/r+.25)-.5),uniqueCost:(e,t,r)=>"object"==typeof e?e.lessThan(1)&&e.plus(t).lessThanOrEqualTo(2)?r:new Decimal(Number.POSITIVE_INFINITY):e<1&&e+t<=2?r:Number.POSITIVE_INFINITY,uniqueMax:e=>"object"==typeof e?new Decimal(1):1,getBuyAmount:e=>"custom"===SharkGame.Settings.current.buyAmount?$("#custom-input")[0]&&Math.floor($("#custom-input")[0].valueAsNumber)>=1&&$("#custom-input")[0].valueAsNumber<1e18?Math.floor($("#custom-input")[0].valueAsNumber):1:SharkGame.Settings.current.buyAmount<0&&e?1:SharkGame.Settings.current.buyAmount,getPurchaseAmount(e,t=res.getResource(e)){const r=sharkmath.getBuyAmount();return r>0?r:Math.floor(t/-r)}},SharkGame.TextUtil={plural:e=>1===e?"":"s",getDeterminer(e){const t=SharkGame.ResourceMap.get(e).name.charAt(0);return["kelp","sand","algae","coral","spronge","delphinium","coralglass","porite","sharkonium","residue","tar","ice","science","arcana","kelp","calcinium"].includes(e)?"":"aeiou".includes(t)?"an":"a"},getIsOrAre:(e,t=res.getResource(e))=>["sand","algae","coral","sponge","spronge","delphinium","coralglass","porite","sharkonium","residue","tar","ice","science","arcana","kelp","calcinium"].includes(e)||1===t?"is":"are",shouldHideNumberOfThis:e=>["world","aspectAffect","specialResourceOne","specialResourceTwo"].includes(e),boldString:e=>`<span class='bold'>${e}</span>`,beautify(e,t,r){if(cad.noNumberBeautifying)return e.toExponential(5);if("exponen"===SharkGame.Settings.current.notation)return e.toExponential(2);let a,o=!1;if(e<0&&(o=!0,e*=-1),e===Number.POSITIVE_INFINITY)a="infinite";else if(e<1&&e>=0)a=t?"0":e>=.01?e.toFixed(2)+"":e>=.001?e.toFixed(3)+"":e>=1e-4?e.toFixed(4)+"":e>=1e-5?e.toFixed(5)+"":"0",o&&(a="-"+a);else{let t;if("SI"===SharkGame.Settings.current.notation)t=["","k","M","G","T","P","E","Z","Y"];else t=["","K","M","B","T","Qa","Qi","Sx","Sp"];const s=Math.floor(Math.log10(e)),n=Math.max(0,2-s%3),i=Math.floor(s/3);let l;if(i>=t.length)a=e>1e290?"max":e>1e200?"too much":e>1e100?"tons":"lots";else{let u;l=t[i],i>0&&(e/=Math.pow(1e3,i)),u=0===i?r&&r-s>0&&e!==Math.floor(e)?e.toFixed(r-s):Math.floor(e):i>0?e.toFixed(n)+l:e.toFixed(n),a=(o?"-":"")+u}}return a},beautifyIncome(e,t=""){if(cad.noNumberBeautifying)return e.toExponential(3)+t;const r=Math.abs(e);return r>=.001?(e=sharktext.beautify(e,!1,2),e+=t,e+="/s"):r>1e-6?(e=(e*=3600).toFixed(3),e+=t,e+="/h"):e=0+t+"/s",e},formatTime(e){const t=Math.floor(e%1e3/10),r=Math.floor(e/1e3),a=Math.floor(r/60),o=Math.floor(a/60),s=Math.floor(o/24),n=Math.floor(s/7),i=Math.floor(n/4),l=Math.floor(i/12),u=(e/1e3<10?"."+t.toString(10).padStart(2,"0"):"")+(0===a?"s":""),c=(r%60).toString(10).padStart(r>=60?2:0,"0"),m=a>0?(a%60).toString(10).padStart(2,"0")+":":"",g=o>0?(o%24).toString()+":":"",h=s>0?(s%7).toString()+"D, ":"",p=n>0?(n%4).toString()+"W, ":"",S=i>0?(i%12).toString()+"M, ":"";return(l>0?l.toString()+"Y, ":"")+S+p+h+g+m+c+u},getResourceName(e,t,r,a,o){if(res.isCategory(e))return o||SharkGame.ResourceCategories[e].name;const s=SharkGame.ResourceMap.get(e),n=r||Math.floor(SharkGame.PlayerResources.get(e).amount);let i=o||(n-1<SharkGame.EPSILON?s.singleName:s.name),l="";if(SharkGame.flags.egg&&(i=n>1?"eggs":"egg"),"world"===i&&(i=Math.random()>5e-4?"world":"ZA WARUDO"),SharkGame.Settings.current.boldCosts&&(i=i.bold()),"none"!==SharkGame.Settings.current.colorCosts){let e="color"===SharkGame.Settings.current.colorCosts?s.color:sharkcolor.getBrightColor(s.color);if(t)e=sharkcolor.colorLum(s.color,-.5);else if(a){const t=sharkcolor.getRelativeLuminance(a),r=sharkcolor.getRelativeLuminance(e);let o;o=r>t?(r+.05)/(t+.05):(t+.05)/(r+.05);const s=3.5;if(o<s){const r=s*t+.05*s-.05;e=sharkcolor.correctLuminance(e,r>1?(t+.05)/s-.05:r)}}l=" style='color:"+e+"'"}return"<span class='click-passthrough'"+l+">"+i+"</span>"},resourceListToString(e,t,r){if($.isEmptyObject(e))return"";let a="";return _.each(e,((e,o)=>{"object"==typeof e&&(e=e.toNumber()),e>0&&world.doesResourceExist(o)&&(a+=sharktext.beautify(e),a+=" "+sharktext.getResourceName(o,t,e,r)+", ")})),a=a.slice(0,-2),a}},SharkGame.ColorUtil={colorLum(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;let r="#";for(let a=0;a<3;a++){let o=parseInt(e.substr(2*a,2),16);o=Math.round(Math.min(Math.max(0,o+o*t),255)).toString(16),r+=("00"+o).substr(o.length)}return r},getRelativeLuminance(e){e=String(e).replace(/[^0-9a-f]/gi,"");let t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),a=parseInt(e.substr(4,2),16);t/=255,r/=255,a/=255;let o=0;return _.each([t,r,a],((e,t)=>{e<=.03928?e/=12.92:e=((e+.055)/1.055)**2.4,o+=e*[.2126,.7152,.0722][t]})),o},correctLuminance(e,t){e=String(e).replace(/[^0-9a-f]/gi,"");let r=parseInt(e.substr(0,2),16),a=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16);r/=255,a/=255,o/=255;const s=1.075*(.2126*r**2+.7152*a**2+.0722*o**2),n=-.075*(.2126*r+.7152*a+.0722*o),i=Math.max((-n+Math.sqrt(n**2+4*s*t))/(2*s),0);return r=parseInt(Math.min(255,255*r*i).toFixed(0)).toString(16).padStart(2,"0"),a=parseInt(Math.min(255,255*a*i).toFixed(0)).toString(16).padStart(2,"0"),o=parseInt(Math.min(255,255*o*i).toFixed(0)).toString(16).padStart(2,"0"),"#"+r+a+o},convertColorString(e){const t=e.substring(4).replace(/[^0-9a-f]/gi," ").split(" ");let r="#";for(let e=0;e<3;e++)r+=("00"+parseInt(t[2*e]).toString(16)).substr(parseInt(t[2*e]).toString(16).length);return r},getBrightColor(e){e=String(e).replace(/[^0-9a-f]/gi,"");let t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),a=parseInt(e.substr(4,2),16);t/=255,r/=255,a/=255;const o=Math.max(t,r,a);return t=parseInt((1/o*255*t).toFixed(0)).toString(16),r=parseInt((1/o*255*r).toFixed(0)).toString(16),a=parseInt((1/o*255*a).toFixed(0)).toString(16),"#"+t+r+a},getElementColor(e,t="background-color"){const r=getComputedStyle(document.getElementById(e)).getPropertyValue(t);return sharkcolor.convertColorString(r)},getVariableColor:e=>getComputedStyle(document.body).getPropertyValue(e).replace(/ /g,"")},SharkGame.TimeUtil={getRunTime(e){const t=_.now()-SharkGame.timestampRunStart,r=SharkGame.persistentFlags.totalPausedTime+SharkGame.persistentFlags.currentPausedTime;let a=0;return"number"==typeof SharkGame.flags.hourHandLeft&&(a=SharkGame.flags.minuteHandTimer-SharkGame.flags.hourHandLeft),"number"==typeof SharkGame.flags.bonusTime&&(a-=SharkGame.flags.bonusTime),e?t:t-r-a}},SharkGame.MiscUtil={tryAddProperty:(e,t,r)=>(_.isUndefined(e[t])&&(e[t]=r),e)};